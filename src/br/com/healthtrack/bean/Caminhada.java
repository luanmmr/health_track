package br.com.healthtrack.bean;

import java.util.Calendar;

/**
 * A classe Caminhada representa um tipo de atividade mais específica do que a sua superclasse 
 * Atividade. Ela implementa a interface DistanciaPercorrida para que consiga definir a 
 * distância percorrida na caminhada.
 * @author Luan Ribeiro
 * @version 1.0
 */
public class Caminhada extends Atividade implements DistanciaPercorrida {
	
	private double distanciaPercorrida;
	
	/**
	 * Construtor no qual é definido o código da atividade, a data de início e fim da 
	 * atividade, usuário da atividade e a distância percorrida. Posteriormente é calculado 
	 * a quantidade de kcal que foi perdida.
	 * @param código da atividade
	 * @param dataInicio Data/Hora do Início da atividade
	 * @param dataFim Data/Hora do Fim da atividade
	 * @param usr Usuário
	 * @param distancia Distância Percorrida
	 * @param ritmo Ritmo da Atividade(Leve, Moderado, Intenso)
	 */
	public Caminhada(int codigo, Calendar dataInicio, Calendar dataFim, Usuario usr, 
					 double distancia, RitmoAtividade ritmo) {
		super(codigo, dataInicio, dataFim, usr, ritmo);
		setDistancia(distancia);
		calcularKcalPerdida();
	}
	
	public Caminhada(int codigo, Calendar dataInicio, Calendar dataFim,
			 		 double distancia, RitmoAtividade ritmo) {
		super(codigo, dataInicio, dataFim, ritmo);
		setDistancia(distancia);
	}
	
	/**
	 * Construtor com bloco de instruções vazio e sem parâmetros
	 */
	public Caminhada() {
		
	}
	
	/**
	 * Define a distância percorrida com a caminhada
	 * @param distancia Distância Percorrida
	 */
	@Override
	public void setDistancia(double distancia) {
		this.distanciaPercorrida = distancia;
	}
	
	/**
	 * Obtém a distância percorrida com a caminhada
	 * @return A distância percorrida
	 */
	@Override
	public double getDistancia() {
		return distanciaPercorrida;
	}
	
	/**
	 * Calcula a quantidade de kcal perdida se baseando no tempo, equivalente 
	 * metabólico(MET) da atividade e peso do usuário
	 */
	@Override
	public void calcularKcalPerdida() {	
	  /*
	  * Fonte
	  * http://www.cdof.com.br/MET_compendium.pdf
	  * 
	  * Caminhada Leve
	  * Até 4,8 km/h = MET 3.3
      * Caminhada Moderada
      * De 4,8 km/h até 6,4 km/h = MET 5
      * Caminhada Intensa
      * De 6,4 km/h até 8 km/h = MET 8
      * 
	  */
	  if (getRitmo().getCodigo() == 1) {
	    setKcalPerdida(kcalPerdida(3.3, getUsuario().getPeso()));
	    
	  }else if(getRitmo().getCodigo() == 2) {
		setKcalPerdida(kcalPerdida(5, getUsuario().getPeso()));
		
	  }else {
		setKcalPerdida(kcalPerdida(8, getUsuario().getPeso()));
		
	  }
	  
	}
	
	/**
	 * String formatada com todos os dados da Caminhada
	 * @return Retorna uma representação em string do objeto
	 */
	@Override
	public String toString() {
	  return String.format("%s\"distanciaPercorrida\": %.1f \n\n}", super.toString(), distanciaPercorrida);
	}
}
